<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>闲置应用邮件通知</title>
    <style>
      body {
        background-color: #f7fafc;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        font-family: Arial, sans-serif;
      }
      .card {
        background-color: #ffffff;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        overflow: hidden;
        width: 90%;
        max-width: 800px;
      }
      /* 标题部分 */
      .header {
        background-color: #2d3959;
        color: white;
        padding: 10px;
        border-radius: 10px 10px 0 0;
      }
      .container {
        display: flex;
        align-items: center;
        padding: 20px;
      }
      .logo {
        width: 50px;
        height: 50px;
        margin-right: 20px;
      }
      .text-container {
        color: white;
      }
      .text-container h1 {
        margin: 0;
        font-size: 24px;
        font-weight: normal;
      }
      .text-container a {
        color: #d3d3d3 !important;
        text-decoration: none !important;
      }
      .text-container p {
        margin: 5px 0 0;
        font-size: 16px;
        color: #d3d3d3;
      }
      /* 内容部分 */
      .content {
        padding: 20px;
      }
      .content h2 {
        display: inline-block;
        font-size: 1.25em;
        margin: 0 0 10px;
        font-weight: 500;
      }
      .content p {
        color: #a9a9a9;
        font-size: 0.9em;
        margin: 5px 0;
      }
      .hollow-button {
        padding: 8px 10px;
        font-size: 1em;
        text-align: center;
        text-decoration: none !important;
        color: #3496f7;
        border-width: 1px;
        border-style: solid;
        border-color: #3496f7;
        border-radius: 5px;
      }
      .refs {
        padding-left: 0.5rem;
        border-left-width: 5px;
        border-left-style: solid;
        border-color: #759ced;
        font-weight: normal;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        padding: 10px;
        border: none;
        border-bottom: 1px solid #e2e8f0;
        text-align: left;
        font-size: 0.9em;
        font-weight: normal;
      }
      th {
        background-color: #f7fafc;
        color: #4a5568;
      }
      .button-container {
        text-align: center;
        margin-top: 20px;
      }
      .button {
        display: inline-block;
        padding: 8px 50px;
        font-size: 1em;
        text-align: center;
        text-decoration: none !important;
        color: white;
        background-color: #3496f7;
        border: none;
        border-radius: 20px;
      }
      .button:hover {
          background-color: #1f78d1;
      }
      .bk-app {
        background-color: #f1f3f4;
        font-weight: bold;
      }
      .bk-app-code {
        color: #9ba2b1;
      }
      .bk-app-module {
        color: #585c63;
      }
      .bk-app-module td {
        color: #767676;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <div class="header">
        <div class="container">
          <img class="logo" alt="logo" src="data:image/png;base64,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">
          <div class="text-container">
            <h1>蓝鲸开发者中心</h1>
            <p>{{ bkpaas_url }}</p>
          </div>
        </div>
      </div>
      <div class="content">
        <div>
          <h2>你当前有 {{ idle_cnt }} 个应用有闲置模块，请下架闲置模块或标记为忽略提醒！</h2>
          <a class="hollow-button" href="{{ bkpaas_url }}">去处理</a>
        </div>
        <p>闲置模块定义：近 30 天没有访问记录，CPU 使用率低于 1% 且近 7 天无波动</p>
        <p>可选操作：下架（推荐）/ 忽略提醒（如果该模块仍需使用）</p>
        <h4 class="refs">模块情况</h4>
        <table>
          <thead>
            <tr>
              <th>闲置模块</th>
              <th>环境</th>
              <th>资源配额</th>
              <th>CPU 使用率（7d）</th>
              <th>最近部署时间</th>
            </tr>
          </thead>
          <tbody>
            {% for app in idle_apps %}
            <tr class="bk-app">
              <td colspan="5">
                {{ app.name }} <span class="bk-app-code"> ({{ app.code }}) </span>
              </td>
            </tr>
            {% for mod_env in app.module_envs %}
            <tr class="bk-app-module">
              <td>{{ mod_env.module_name }}</td>
              <td>{{ mod_env.environment }}</td>
              <td>{{ mod_env.res_summary }}</td>
              <td>{{ mod_env.cpu_usage_avg }}</td>
              <td>{{ mod_env.latest_deployed_at }}</td>
            </tr>
            {% endfor %}
            {% endfor %}
          </tbody>
        </table>
        <div class="button-container">
          <a class="button" href="{{ bkpaas_url }}">去处理</a>
        </div>
      </div>
    </div>
  </body>
</html>
